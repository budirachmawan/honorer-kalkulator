<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Kalkulator Keamanan Nikah</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{font-family:Arial;background:#f3f4f6;margin:0;padding:14px;}
.header{position:relative;margin-bottom:14px}
.header img{width:100%;border-radius:14px}
.logo{position:absolute;top:12px;left:12px;width:60px;background:#fff;padding:6px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,.15)}

.app{max-width:980px;margin:auto;display:grid;grid-template-columns:1fr 1fr;gap:18px}
.card{background:#fff;padding:22px;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.06)}
h2{margin-top:0}
label{font-weight:bold;display:block;margin-top:14px}
input,select,button{width:100%;padding:14px;margin-top:8px;font-size:16px;border-radius:10px;border:1px solid #ddd}
button{background:#f5c400;border:none;font-weight:bold;cursor:pointer}
.big{font-size:32px;font-weight:bold;text-align:center}
.cta{background:#0f9d58;color:#fff;font-size:18px;margin-top:18px;padding:14px}
.note{font-size:13px;background:#fff3cd;padding:12px;border-radius:10px;margin-top:14px}
.small{font-size:12px;color:#777;margin-top:10px;text-align:center}

@media(max-width:768px){
  .app{grid-template-columns:1fr}
  .big{font-size:26px}
  .logo{width:46px}
}
</style>
</head>

<body>

<div class="header">
  <img src="banner.png" alt="HONORER DIGITAL">
  <img src="logo.png" class="logo" alt="HONORER DIGITAL">
</div>

<div class="app">

<div class="card">
<h2>Kalkulator Keamanan</h2>

<label>Status hidup</label>
<select id="status">
<option value="nikah">Akan Menikah</option>
<option value="hamil">Hamil</option>
<option value="anak">Sudah Punya Anak</option>
</select>

<label>Penghasilan per bulan</label>
<input id="income" type="text" placeholder="contoh: 3.000.000">
<button onclick="hitung()">Hitung Keamanan</button>
</div>

<div class="card">
<div class="big" id="emas">–</div>
<canvas id="chart"></canvas>
<div id="detail" style="margin-top:18px"></div>
<button class="cta" id="waBtn" style="display:none">Kunci Dana Saya di Emas</button>
<div class="small">Harga emas diambil dari sumber resmi dan diupdate realtime</div>
<div class="note">Ini bukan dana darurat. Ini dana tujuan (nikah, lahiran, anak). Dana darurat tetap harus kamu punya terpisah.</div>
</div>

</div>

<script>
let chart;
document.getElementById("income").addEventListener("input",e=>{
 let v=e.target.value.replace(/\D/g,"");
 e.target.value=v?parseInt(v).toLocaleString("id-ID"):"";
});
function formatIDR(x){return x.toLocaleString("id-ID");}

async function getHargaEmas(){
 try{
  const r=await fetch("https://logam-mulia-api.vercel.app/api/antam");
  const d=await r.json();
  return d.buy;
 }catch{return 2652000;}
}

async function hitung(){
 const income=Number(document.getElementById("income").value.replace(/\./g,""));
 const status=document.getElementById("status").value;
 if(!income) return;

 const mult={nikah:6,hamil:4,anak:3};
 const reason={
  nikah:`akad & resepsi sederhana, mahar, pindahan & rumah tangga awal, perlengkapan dasar, biaya hidup bulan pertama, dokumen & administrasi, dana adaptasi pasangan`,
  hamil:`kontrol kehamilan rutin, vitamin & nutrisi ibu, persiapan persalinan, biaya melahirkan, perlengkapan bayi awal, cadangan komplikasi, pemulihan ibu pasca lahir`,
  anak:`susu & makanan, kesehatan & imunisasi, pakaian & perlengkapan, pendidikan awal, transportasi, biaya hidup tambahan, dana sakit`
 };

 const target=income*mult[status];
 const buffer=income*0.7*3;
 const aman=Math.max(0,target-buffer);

 const harga=await getHargaEmas();
 const gram=aman/harga;
 const cicil6=aman/6;
 const cicil12=aman/12;

 document.getElementById("emas").innerText=gram.toFixed(2)+" gram emas";

 document.getElementById("detail").innerHTML=`
<b>Dana besar yang kamu butuhkan</b><br>
Rp ${formatIDR(target)}<br>
<i>Estimasi realistis karena mencakup: ${reason[status]}.</i><br><br>

<b>Dana penyangga hidup (3 bulan)</b><br>
Rp ${formatIDR(buffer)}<br>
<i>Ini adalah sabuk pengaman hidup: biaya makan, kontrakan, listrik, dan kebutuhan dasar jika penghasilan terganggu. Tiga bulan adalah waktu minimum agar kamu bisa menyesuaikan arus kas tanpa hutang atau menjual aset.</i><br><br>

<b>Dana yang sudah aman dikunci</b><br>
Rp ${formatIDR(aman)}<br>
<i>Ini adalah dana tujuan setelah hidup kamu aman. Karena tidak dipakai untuk kebutuhan harian, uang ini boleh dikonversi ke emas agar nilainya tidak tergerus.</i><br><br>

<div style="background:#eef6ff;padding:12px;border-radius:10px">
<b>Urutan yang benar:</b><br>
1) Amankan dulu dana penyangga hidup 3 bulan.<br>
2) Setelah itu baru kunci dana aman ke emas.
</div><br>

<b>Setara emas:</b> ${gram.toFixed(2)} gram<br>
<b>Harga emas:</b> Rp ${formatIDR(harga)} / gram<br><br>

<b>Jika dikumpulkan bertahap (bukan hutang):</b><br>
<i>Ini bukan cicilan hutang. Ini adalah rencana menabung sampai dana aman ini terkumpul.</i><br>
6 bulan → Rp ${formatIDR(cicil6)} / bulan<br>
12 bulan → Rp ${formatIDR(cicil12)} / bulan
`;

 const data=[aman,target-aman];
 if(chart) chart.destroy();
 chart=new Chart(document.getElementById("chart"),{
  type:"doughnut",
  data:{labels:["Aman","Berisiko"],datasets:[{data}]}
 });

 const wa=encodeURIComponent(
`HONORER DIGITAL

Saya mau mengamankan dana fase hidup saya.

Target dana: Rp ${formatIDR(target)}
Dana penyangga: Rp ${formatIDR(buffer)}
Dana siap dikunci: Rp ${formatIDR(aman)}
Setara: ${gram.toFixed(2)} gram emas

Mohon bantu saya skema pengunciannya.`
 );

 document.getElementById("waBtn").style.display="block";
 document.getElementById("waBtn").onclick=()=>window.open("https://wa.me/6285123882845?text="+wa,"_blank");
}
</script>
</body>
</html>
